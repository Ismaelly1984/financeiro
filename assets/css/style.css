@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

/* =========================
   Variáveis (Dark / Light)
   ========================= */
:root {
  /* Paleta moderna (DARK) */
  --cor-fundo: #111827;
  --cor-secundaria: #1F2937;
  --cor-texto: #F9FAFB;
  --cor-texto-secundario: #D1D5DB; /* mais claro para legibilidade */
  --cor-borda: #374151;
  --cor-primaria: #3B82F6;  /* azul 500 */
  --cor-primaria-hover: #2563EB;
  --cor-acao: #1D4ED8;
  --cor-acao-hover: #1E3A8A;
  --cor-texto-sobre-acao: #FFFFFF;
  --cor-sucesso: #10B981;   /* verde 500 (ok em dark) */
  --cor-aviso: #EF4444;     /* vermelho 500 (ok em dark) */

  --sombra: 0 4px 6px rgba(0,0,0,.1);
  --sombra-escura: 0 2px 10px rgba(0,0,0,.4);
  --raio-borda: 12px;

  /* Tipografia/espaçamento fluidos */
  --fs-base: clamp(14px, .9vw + 10px, 16px);
  --fs-h1: clamp(1.25rem, 1.2vw + 1.2rem, 2rem);
  --fs-h2: clamp(1.1rem, 1vw + 1rem, 1.5rem);
  --gap: clamp(.75rem, 1.2vw, 1rem);
}

:root.light {
  /* Paleta moderna (LIGHT) */
  --cor-fundo: #F9FAFB;
  --cor-secundaria: #FFFFFF;
  --cor-texto: #111827;
  --cor-texto-secundario: #4B5563;
  --cor-borda: #D1D5DB;
  --cor-primaria: #2563EB;  /* azul 600 */
  --cor-primaria-hover: #1D4ED8;
  --cor-acao: #1D4ED8;
  --cor-acao-hover: #1E3A8A;
  --cor-texto-sobre-acao: #FFFFFF;
  --cor-sucesso: #047857;   /* verde 700 → contraste melhor */
  --cor-aviso: #B91C1C;     /* vermelho 700 → contraste melhor */
}

/* Font Awesome overrides to ensure swap behavior */
@font-face {
  font-family: 'Font Awesome 6 Free';
  font-style: normal;
  font-weight: 900;
  font-display: swap;
  src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-solid-900.woff2') format('woff2');
}

@font-face {
  font-family: 'Font Awesome 6 Free';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-regular-400.woff2') format('woff2');
}

@font-face {
  font-family: 'Font Awesome 6 Brands';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/webfonts/fa-brands-400.woff2') format('woff2');
}

/* =========================
   Acessibilidade / Reset
   ========================= */
html{scroll-behavior:smooth}
.sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  font-family:'Inter',sans-serif;
  font-size:var(--fs-base);
  background-color:var(--cor-fundo);
  color:var(--cor-texto);
  line-height:1.6;
  display:flex;flex-direction:column;min-height:100vh;
  text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;
}

/* =========================
   Navbar
   ========================= */
.navbar{
  background-color:var(--cor-secundaria);
  padding:.85rem 0;
  box-shadow:var(--sombra-escura);
  position:sticky;top:0;z-index:1000;
}
.navbar-container{
  width:min(100%, 1100px);
  margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:.75rem;
  padding:0 clamp(.75rem, 3vw, 1.5rem);
}
.logo{font-size:clamp(1.1rem, 1.2vw + 1rem, 1.6rem);font-weight:700;color:var(--cor-texto)}
.nav-links{list-style:none;display:flex;gap:1rem;align-items:center}
.nav-links a{
  color:var(--cor-texto);text-decoration:none;font-weight:600;
  padding:.25rem 0;transition:color .2s ease,border-color .2s ease;
}
.nav-links a:hover{color:var(--cor-primaria)}
.nav-links a.active{color:var(--cor-primaria);border-bottom:2px solid var(--cor-primaria)}
.hamburger{display:none;font-size:1.75rem;color:var(--cor-texto);background:none;border:none;cursor:pointer}

/* =========================
   Container / Títulos / Seções
   ========================= */
.container{
  width:min(100%, 1100px);
  margin:clamp(1rem,2.5vh,2rem) auto;
  padding:0 clamp(.75rem, 3vw, 1.5rem);flex-grow:1;
}
h1,h2{color:var(--cor-primaria);text-align:center;margin-bottom:clamp(.75rem,1.25rem,1.5rem)}
h1{font-size:var(--fs-h1)} h2{font-size:var(--fs-h2)}
section{
  background-color:var(--cor-secundaria);
  padding:clamp(1rem, 1.2rem, 1.5rem);
  margin-bottom:1.25rem;border-radius:var(--raio-borda);box-shadow:var(--sombra-escura);
}

/* =========================
   Resumo e limite
   ========================= */
.resumo p,.limite-gastos p{font-size:1.05rem;margin-bottom:.5rem;color:var(--cor-texto-secundario)}
.resumo p strong,.limite-gastos p strong{color:var(--cor-texto)}
.resumo #saldo{font-weight:700;color:var(--cor-primaria)}
.resumo .negativo{color:var(--cor-aviso)}
.resumo #total-receitas{color:var(--cor-sucesso)}
.resumo #total-despesas{color:var(--cor-aviso)}

/* =========================
   Formulários
   ========================= */
#form,#form-editar{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--gap)}
#form-editar .modal-buttons{grid-column:span 2;display:flex;gap:var(--gap)}
#form input,#form select,#form button,
#form-editar input,#form-editar select,#form-editar button{
  width:100%;padding:12px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto);
}
#form button{
  grid-column:span 2;background-color:var(--cor-acao);color:var(--cor-texto-sobre-acao);font-weight:700;cursor:pointer;
  transition:background-color .25s ease,box-shadow .25s ease,transform .15s ease;
}
#form button:hover{
  background-color:var(--cor-acao-hover);
  box-shadow:0 10px 24px rgba(37,99,235,.28);
  transform:translateY(-1px);
}
#form button:active{transform:translateY(1px)}
input:valid,select:valid{border-color:var(--cor-sucesso)}
input:invalid,select:invalid{border-color:var(--cor-aviso)}
.modal-salvar-btn{background-color:var(--cor-sucesso)!important;color:#fff;font-weight:700;cursor:pointer;transition:filter .2s}
.modal-salvar-btn:hover{filter:brightness(1.05)}
.modal-cancelar-btn{background-color:#6c757d!important;color:#fff;font-weight:700;cursor:pointer;transition:filter .2s}
.modal-cancelar-btn:hover{filter:brightness(1.05)}

/* =========================
   Lista de transações
   ========================= */
#lista-transacoes{list-style:none;display:flex;flex-direction:column;gap:.75rem}
.transacao-item{
  display:flex;justify-content:space-between;align-items:center;
  padding:1rem;border-radius:12px;border:1px solid var(--cor-borda);border-left:6px solid;
  transition:transform .15s ease,box-shadow .15s ease,background-color .2s ease;cursor:pointer;
  opacity:0;transform:translateY(10px);
}
.transacao-item.show{opacity:1;transform:translateY(0)}
.transacao-item:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(0,0,0,.15)}
.transacao-item.receita{border-color:var(--cor-sucesso);background-color:color-mix(in srgb, var(--cor-sucesso) 12%, transparent)}
.transacao-item.despesa{border-color:var(--cor-aviso);background-color:color-mix(in srgb, var(--cor-aviso) 12%, transparent)}
:root.light .transacao-item.receita{background-color:color-mix(in srgb, var(--cor-sucesso) 10%, #fff)}
:root.light .transacao-item.despesa{background-color:color-mix(in srgb, var(--cor-aviso) 10%, #fff)}
.transacao-info{flex:1;display:flex;align-items:center;gap:1rem;min-width:0}
.transacao-info .descricao{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:var(--cor-texto)}
.transacao-info .data{font-size:.9rem;color:var(--cor-texto-secundario)}
.transacao-item .valor{font-weight:800;font-size:1.1rem;padding:0 1rem;color:var(--cor-texto)}
.transacao-item.receita .valor{color:var(--cor-sucesso)}
.transacao-item.despesa .valor{color:var(--cor-aviso)}
.transacao-actions{display:flex;gap:.5rem}
.edit-btn,.delete-btn{background:none;border:none;font-size:1.2rem;cursor:pointer;transition:color .2s ease;padding:.5rem}
.edit-btn{color:var(--cor-primaria)} .edit-btn:hover{color:color-mix(in srgb, var(--cor-primaria) 80%, #fff)}
.delete-btn{color:var(--cor-aviso)} .delete-btn:hover{color:color-mix(in srgb, var(--cor-aviso) 80%, #fff)}

/* =========================
   Filtros / Ordenação / Botões
   ========================= */
.filter-sort-controls{
  display:flex;flex-wrap:wrap;gap:var(--gap);margin-bottom:1.25rem;justify-content:center;align-items:center
}
.filter-controls,.sort-controls{display:flex;gap:.5rem;flex-grow:1;justify-content:center}

.filter-sort-controls select,
.filter-sort-controls button,
.filter-sort-controls input[type="date"]{
  padding:10px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto);font-size:1rem;cursor:pointer;
  transition:background-color .2s ease,border-color .2s ease,box-shadow .25s ease,transform .15s ease,filter .15s ease;min-height:40px;
}
.filter-sort-controls select:hover,
.filter-sort-controls button:hover,
.filter-sort-controls input[type="date"]:hover{
  background-color:var(--cor-secundaria);border-color:var(--cor-primaria)
}
.filter-sort-controls button{background-color:var(--cor-acao);color:var(--cor-texto-sobre-acao);font-weight:700}
.filter-sort-controls button:hover{
  background-color:var(--cor-acao-hover);
  box-shadow:0 10px 22px rgba(37,99,235,.25);
  transform:translateY(-1px);
  filter:none;
}
#toggle-ordenacao i{font-size:1.2rem}

/* Datas: melhor visibilidade e compatibilidade */
.filter-sort-controls input[type="date"]{appearance:none;color-scheme:dark}
:root.light .filter-sort-controls input[type="date"]{color-scheme:light}
.filter-sort-controls input[type="date"]::-webkit-calendar-picker-indicator{opacity:.85;filter:invert(1)}
:root.light .filter-sort-controls input[type="date"]::-webkit-calendar-picker-indicator{filter:invert(0)}
#rel-inc-receitas,#rel-inc-despesas{accent-color:var(--cor-primaria)}

.btn-acoes{
  background-color:var(--cor-acao);color:var(--cor-texto-sobre-acao);padding:8px 12px;border:none;border-radius:6px;
  font-size:14px;cursor:pointer;display:inline-flex;align-items:center;gap:6px;
  transition:background-color .25s ease,box-shadow .25s ease,transform .15s ease;
}
.btn-acoes:hover{
  background-color:var(--cor-acao-hover);
  box-shadow:0 10px 24px rgba(37,99,235,.28);
  transform:translateY(-1px);
}

/* =========================
   Gráficos
   ========================= */
.graficos{display:grid;grid-template-columns:1fr;gap:1.25rem}
.grafico{background-color:var(--cor-fundo);padding:1rem;border-radius:var(--raio-borda);box-shadow:var(--sombra-escura)}
.grafico-container{position:relative;height:clamp(220px, 38vh, 420px);max-width:100%;margin:0 auto 1rem}
.grafico-container canvas{width:100%!important;height:100%!important;display:block}

/* =========================
   Limite de gastos
   ========================= */
.limite-gastos input{
  width:100%;padding:10px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto);margin:.5rem 0 1rem
}
.progress-bar{width:100%;height:20px;background-color:var(--cor-borda);border-radius:12px;overflow:hidden;margin-top:1rem}
.progress-bar-fill{height:100%;background:linear-gradient(90deg,#22c55e,#10b981);width:0;transition:width .5s ease,background .3s ease}
.progress-bar-fill.estourou{background:linear-gradient(90deg,#ef4444,#b91c1c)}

/* =========================
   Orçamento por Categoria
   ========================= */
.orcamento-categorias .orcamento-controles{
  display:flex;flex-wrap:wrap;gap:var(--gap);margin-bottom:1.25rem;justify-content:center;align-items:center
}
.orcamento-categorias .orcamento-controles select,
.orcamento-categorias .orcamento-controles input[type="number"],
.orcamento-categorias .orcamento-controles button{
  padding:12px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto);font-size:1rem;flex-grow:1
}
.orcamento-categorias .orcamento-controles button{
  background-color:var(--cor-acao);color:var(--cor-texto-sobre-acao);font-weight:700;cursor:pointer;
  transition:background-color .25s ease,box-shadow .25s ease,transform .15s ease,filter .15s ease
}
.orcamento-categorias .orcamento-controles button:hover{
  background-color:var(--cor-acao-hover);
  box-shadow:0 10px 24px rgba(37,99,235,.26);
  transform:translateY(-1px);
  filter:none;
}

:root.light .btn-acoes:hover,
:root.light #form button:hover,
:root.light .filter-sort-controls button:hover,
:root.light .orcamento-categorias .orcamento-controles button:hover{
  background-color:color-mix(in srgb, var(--cor-acao) 85%, #FFFFFF 15%);
  border-color:color-mix(in srgb, var(--cor-acao) 70%, #FFFFFF 30%);
  box-shadow:0 14px 30px rgba(37,99,235,.22);
}
.lista-orcamentos-categorias{display:flex;flex-direction:column;gap:1rem}
.orcamento-item{
  background-color:var(--cor-fundo);padding:1rem;border-radius:12px;border:1px solid var(--cor-borda);
  border-left:6px solid var(--cor-primaria);display:flex;flex-direction:column;gap:.5rem;box-shadow:var(--sombra);
}
.orcamento-header{display:flex;justify-content:space-between;align-items:center;font-weight:700;color:var(--cor-texto)}
.orcamento-barra{margin-top:.5rem;height:10px;background:rgba(148,163,184,.15);border-radius:999px;overflow:hidden}
.orcamento-barra .progresso{height:100%;background:linear-gradient(90deg,var(--cor-primaria),#06b6d4);width:0}
.remover-orcamento-btn{
  align-self:flex-end;margin-top:.5rem;background:transparent;color:var(--cor-texto);
  border:1px solid var(--cor-borda);border-radius:10px;padding:.45rem .6rem;cursor:pointer;transition:border-color .15s,background .15s
}
.remover-orcamento-btn:hover{border-color:#ef4444;background:rgba(239,68,68,.12)}

/* =========================
   Modais
   ========================= */
.modal{display:none;position:fixed;z-index:1002;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.45)}
.modal-content{
  background-color:var(--cor-secundaria);padding:2rem;border:1px solid var(--cor-borda);
  width:90%;max-width:520px;border-radius:16px;box-shadow:var(--sombra-escura);position:relative;text-align:center
}
.modal-content h2{margin:0 0 1rem}
.modal-content p{margin-bottom:1.25rem;font-size:1.05rem;color:var(--cor-texto-secundario)}
.modal-buttons{display:flex;justify-content:center;gap:1rem;margin-top:1.25rem}
.close-btn{color:var(--cor-texto);position:absolute;top:10px;right:20px;font-size:28px;font-weight:700;cursor:pointer}

/* Títulos de modal podem ser focáveis para leitores de tela; estilo visual suave */
.modal-content h2:focus {
  outline: none;
}
.modal-content h2:focus-visible {
  outline: 3px solid var(--focus-ring-color);
  outline-offset: 4px;
  border-radius: 6px;
}

/* ===== Melhorias visuais de foco ===== */
/* Remova contornos padrão e aplique anel apenas para navegação por teclado (:focus-visible) */
:focus { outline: none; }

button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
.transacao-item:focus-visible,
.edit-btn:focus-visible,
.delete-btn:focus-visible,
.remover-orcamento-btn:focus-visible,
.btn-acoes:focus-visible,
.modal-salvar-btn:focus-visible,
.modal-cancelar-btn:focus-visible,
.fab-ajuda:focus-visible,
.close-btn:focus-visible,
.back-link:focus-visible,
.nav-links a:focus-visible,
.footer-links a:focus-visible,
.toc a:focus-visible,
.details summary:focus-visible,
summary:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  border-radius: 8px;
}

/* Pequeno halo adicional opcional (não substitui o contorno, apenas melhora percepção) */
button:focus-visible,
.btn-acoes:focus-visible,
.back-link:focus-visible,
.nav-links a:focus-visible,
.footer-links a:focus-visible {
  box-shadow: 0 8px 32px color-mix(in srgb, var(--focus-ring-color) 15%, transparent);
}

@media (prefers-reduced-motion: reduce) {
  button:focus-visible,
  .btn-acoes:focus-visible,
  .nav-links a:focus-visible,
  .footer-links a:focus-visible { box-shadow: none; }
}

/* =========================
   Toast / Mensagens
   ========================= */
.mensagem-app{
  position:fixed;top:70px;left:50%;transform:translateX(-50%);
  background-color:var(--cor-acao);color:var(--cor-texto-sobre-acao);padding:1rem 1.25rem;border-radius:12px;box-shadow:var(--sombra);
  z-index:1001;display:none;opacity:0;transition:opacity .4s ease, top .4s ease, background .2s ease
}
.mensagem-app.show{display:block;opacity:1;top:80px}
.mensagem-app.success{background:linear-gradient(90deg,#22c55e,#16a34a)}
.mensagem-app.aviso{background:linear-gradient(90deg,#ef4444,#b91c1c)}
.mensagem-app.info{background:linear-gradient(90deg,#3b82f6,#2563eb)}

/* =========================
   Rodapé
   ========================= */
.footer{background-color:var(--cor-secundaria);padding:1rem 0;text-align:center;box-shadow:0 -4px 6px rgba(0,0,0,.1);margin-top:2rem}
.footer-container{
  width:min(100%, 1100px);
  margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem;
  padding:0 clamp(.75rem, 3vw, 1.5rem);
}
.footer-links{display:flex;gap:1.25rem}
.footer-links a{
  color:var(--cor-texto);
  font-size:1.35rem;
  transition:color .2s ease,border-color .2s ease;
  display:inline-flex;align-items:center;justify-content:center;
  min-width:44px;min-height:44px;padding:.35rem;border-radius:12px;
}
.footer-links a:hover{color:var(--cor-primaria)}
.footer-links a.active{color:var(--cor-primaria);border-bottom:2px solid var(--cor-primaria)}

/* =========================
   Botão flutuante de Ajuda (FAB)
   ========================= */
.fab-ajuda{
  position:fixed;right:20px;bottom:max(24px, env(safe-area-inset-bottom, 0px) + 16px);
  width:56px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:50%;
  background-color:var(--cor-acao);color:var(--cor-texto-sobre-acao);box-shadow:var(--sombra-escura);z-index:1003;text-decoration:none;
  transition:transform .15s ease,filter .2s ease, box-shadow .2s ease;
}
.fab-ajuda i{font-size:1.25rem;line-height:1}
.fab-ajuda:hover{filter:brightness(1.05);box-shadow:0 12px 22px rgba(0,0,0,.25)}
.fab-ajuda:active{transform:translateY(1px)}
.fab-ajuda:focus-visible{outline:3px solid color-mix(in srgb, var(--cor-acao) 60%, #fff);outline-offset:3px}
@media (prefers-reduced-motion:reduce){.fab-ajuda{transition:none}}

/* =========================
   Layouts Responsivos
   ========================= */

/* Mobile-first: menu colapsa */
@media (max-width: 860px){
  .nav-links{display:none;position:absolute;top:60px;left:0;width:100%;flex-direction:column;background:var(--cor-secundaria);
    padding:1rem 0;box-shadow:var(--sombra-escura)}
  .nav-links.active{display:flex}
  .hamburger{display:block}
  #form,#form-editar{grid-template-columns:1fr}
  #form-editar .modal-buttons{flex-direction:column}
  .filter-sort-controls{flex-direction:column;align-items:stretch}
  .filter-controls,.sort-controls{flex-direction:column;width:100%}
  .filter-sort-controls select,.filter-sort-controls button,.filter-sort-controls input[type="date"]{width:100%}
  .grafico-container{height:clamp(200px, 34vh, 320px)}
  .footer-container{flex-direction:column;text-align:center}
  .orcamento-categorias .orcamento-controles{flex-direction:column;align-items:stretch}
  .orcamento-categorias .orcamento-controles select,
  .orcamento-categorias .orcamento-controles input[type="number"],
  .orcamento-categorias .orcamento-controles button{width:100%}

  /* Quando a classe 'menu-open' está ativa no root (controlada pelo JS):
     - mostra o menu colapsado
     - bloqueia rolagem de fundo
     - adiciona um backdrop sem necessidade de markup extra */
  :root.menu-open {
    overflow: hidden;
  }
  :root.menu-open .nav-links {
    display: flex;
    z-index: 1001; /* acima do backdrop, abaixo da navbar que tem z-index:1000 */
  }
  :root.menu-open::before {
    content: "";
    position: fixed;
    left: 0;
    right: 0;
    top: 60px; /* deixa a navbar visível */
    bottom: 0;
    background: rgba(0,0,0,0.35);
    z-index: 1000;
  }

}

/* Médio: mais respiro nos gráficos */
@media (min-width: 861px) and (max-width: 1199px){
  .grafico-container{height:clamp(240px, 40vh, 380px)}
}

/* Desktop: grade lateral em Transações */
@media (min-width: 1024px){
  .transacoes-grid{
    display:grid;gap:1rem;grid-template-columns:2fr 1fr;align-items:start;
  }
  .transacoes-grid .transacoes{grid-column:1}
  .transacoes-grid #limite-app,
  .transacoes-grid #orcamento-categorias{
    grid-column:2;position:sticky;top:88px;
  }
}
#toggle-tema{display:inline-block;font-size:1.6rem;margin-left:1rem;background:none;border:none;cursor:pointer;transition:opacity .2s}
:root:not(.light) #toggle-tema i{color:#fff}
:root.light #toggle-tema i{color:#000}
#toggle-tema:hover i{opacity:.7}
.item-transacao {
  display: flex;
  justify-content: space-between;
  padding: 8px;
  border-bottom: 1px solid #ddd;
}

.valor-despesa {
  color: #e63946;
  font-weight: bold;
}

.valor-receita {
  color: #2a9d8f;
  font-weight: bold;
}
.caixa-transacoes{
  max-height: 480px;          /* altura da caixa (ajuste à vontade) */
  overflow-y: auto;
  background: var(--card-bg, #0b1221);
  border: 1px solid rgba(148,163,184,.2);
  border-radius: 14px;
  padding: 8px 0;
}
.caixa-transacoes ul{ margin: 0; padding: 0; list-style: none; }
.caixa-transacoes .transacao-item{ padding: 10px 14px; }

.loading{
  display: none;
  text-align: center;
  padding: .75rem;
  font-size: .9rem;
  opacity: .75;
}
.caixa-transacoes::-webkit-scrollbar{ width: 10px; }
.caixa-transacoes::-webkit-scrollbar-thumb{
  background: rgba(148,163,184,.35);
  border-radius: 10px;
}

/* =========================
   Ajustes UI solicitados
   - Espaçamento maior em listas de transações no desktop
   - Tooltips visuais para ícones do footer (com suporte a :focus-visible)
   - Animação suave do ícone de alternar tema (respeita prefers-reduced-motion)
   ========================= */

@media (min-width: 768px) {
  /* mais espaçamento e padding em itens de transação para melhorar leitura em desktop */
  .transacao-item {
    padding: 1.25rem 1.5rem;
    gap: 1rem;
    font-size: 1rem;
  }
  .transacao-info { gap: 1.25rem }
}

/* Tooltips simples baseados em data-tooltip (aparecem no hover e foco) */
.footer-links a[data-tooltip] {
  position: relative;
}
.footer-links a[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.85);
  color: #fff;
  font-size: .85rem;
  padding: .4rem .6rem;
  border-radius: 6px;
  white-space: nowrap;
  opacity: 0;pointer-events: none;visibility: hidden;
  transition: opacity .18s ease, transform .18s ease;
  z-index: 1200;
}
.footer-links a:focus-visible::after,
.footer-links a:hover::after {
  opacity: 1;visibility: visible;transform: translateX(-50%) translateY(-4px);
}
@media (prefers-reduced-motion: reduce) {
  .footer-links a[data-tooltip]::after { transition: none }
}

/* Animação do ícone de alternar tema */
#toggle-tema i {
  display: inline-block; /* para permitir transform */
  transition: transform .42s cubic-bezier(.2,.9,.2,1), opacity .18s ease;
}
#toggle-tema i.theme-anim {
  transform: rotate(360deg) scale(1.06);
}
@media (prefers-reduced-motion: reduce) {
  #toggle-tema i { transition: none }
  #toggle-tema i.theme-anim { transform: none }
}

/* Regras específicas para links de navegação, rodapé e TOC */
.nav-links a:focus-visible,
.footer-links a:focus-visible,
.toc a:focus-visible {
  outline: 3px solid color-mix(in srgb, var(--cor-primaria) 65%, transparent);
  outline-offset: 3px;
  border-radius: 8px;
  background: color-mix(in srgb, var(--cor-primaria) 6%, transparent);
  color: var(--cor-primaria);
  box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}

/* Links apenas-ícone no rodapé: aumenta o contraste do fundo ao focar */
.footer-links a:focus-visible {
  background: color-mix(in srgb, var(--cor-primaria) 10%, transparent);
}

/* TOC: badge e link com foco mais evidente */
.toc a:focus-visible { padding-left: .75rem; padding-right: .75rem; }

@media (prefers-reduced-motion: reduce) {
  .nav-links a:focus-visible, .footer-links a:focus-visible { box-shadow: none; }
}

/* ===== Ajustes WCAG para anel de foco ===== */
:root {
  /* Espessura e cor do anel de foco — forte o suficiente para contraste em dark */
  --focus-ring-width: 4px;
  --focus-ring-color: color-mix(in srgb, var(--cor-primaria) 90%, #000 10%);
  --focus-ring-offset: 4px;
}
:root.light {
  /* Em tema claro preservamos bom contraste usando cor primária sólida */
  --focus-ring-color: color-mix(in srgb, var(--cor-primaria) 90%, #fff 10%);
}

/* Regras globais de override para foco visível — garantem contraste e espessura adequados */
:focus { outline: none; }

button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
.transacao-item:focus-visible,
.edit-btn:focus-visible,
.delete-btn:focus-visible,
.remover-orcamento-btn:focus-visible,
.btn-acoes:focus-visible,
.modal-salvar-btn:focus-visible,
.modal-cancelar-btn:focus-visible,
.fab-ajuda:focus-visible,
.close-btn:focus-visible,
.back-link:focus-visible,
.nav-links a:focus-visible,
.footer-links a:focus-visible,
.toc a:focus-visible,
.details summary:focus-visible,
summary:focus-visible {
  outline: var(--focus-ring-width) solid var(--focus-ring-color) !important;
  outline-offset: var(--focus-ring-offset) !important;
  border-radius: 8px;
}

/* Pequeno halo adicional opcional (não substitui o contorno, apenas melhora percepção) */
button:focus-visible,
.btn-acoes:focus-visible,
.back-link:focus-visible,
.nav-links a:focus-visible,
.footer-links a:focus-visible {
  box-shadow: 0 8px 32px color-mix(in srgb, var(--focus-ring-color) 15%, transparent);
}

@media (prefers-reduced-motion: reduce) {
  button:focus-visible,
  .btn-acoes:focus-visible,
  .nav-links a:focus-visible,
  .footer-links a:focus-visible { box-shadow: none; }
}

/* Fim ajustes WCAG */

/* KPIs painel para gráficos/relatórios */
.kpi-panel{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;margin-bottom:1rem}
.kpi-item{background:var(--cor-secundaria);border:1px solid var(--cor-borda);padding:.6rem .8rem;border-radius:10px;min-width:140px;text-align:center;font-weight:600;color:var(--cor-texto)}

@media (min-width: 700px){
  .kpi-panel{justify-content:flex-start}
}

/* Utilitários de espaçamento (evita inline styles) */
.mt-1{margin-top:1rem}
.mt-2{margin-top:2rem}
.mt-0-75{margin-top:.75rem}
.mt-1-25{margin-top:1.25rem}
.mb-1{margin-bottom:1rem}
.gap-0-5{gap:.5rem}

/* Label inline usado em filtros */
.label-inline{display:flex;align-items:center;gap:.35rem}

/* Navbar/footer component tweaks */
.nav-back{display:inline-flex;align-items:center;gap:.5rem;color:var(--cor-texto);text-decoration:none}
.nav-back:hover{color:var(--cor-primaria)}
