@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

/* =========================
   Variáveis (Dark / Light)
   ========================= */
:root {
  /* Paleta moderna (DARK) */
  --cor-fundo: #111827;             /* slate-900 */
  --cor-secundaria: #1F2937;        /* slate-800 */
  --cor-texto: #F9FAFB;             /* slate-50 */
  --cor-texto-secundario: #9CA3AF;  /* slate-400 */
  --cor-borda: #374151;             /* slate-700 */
  --cor-primaria: #3B82F6;          /* blue-500 */
  --cor-sucesso: #10B981;           /* emerald-500 */
  --cor-aviso: #EF4444;             /* red-500 */
  --sombra: 0 4px 6px rgba(0, 0, 0, 0.1);
  --sombra-escura: 0 2px 10px rgba(0, 0, 0, 0.4);
  --raio-borda: 12px;
}

:root.light {
  /* Paleta moderna (LIGHT) */
  --cor-fundo: #F9FAFB;             /* slate-50 */
  --cor-secundaria: #FFFFFF;        /* white */
  --cor-texto: #111827;             /* slate-900 */
  --cor-texto-secundario: #4B5563;  /* slate-600 */
  --cor-borda: #E5E7EB;             /* slate-200 */
  --cor-primaria: #2563EB;          /* blue-600 */
  --cor-sucesso: #059669;           /* emerald-600 */
  --cor-aviso: #DC2626;             /* red-600 */
}

/* Acessibilidade */
.sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Animações suaves */
.transacao-item{opacity:0;transform:translateY(10px);transition:opacity .3s ease,transform .3s ease}
.transacao-item.show{opacity:1;transform:translateY(0)}

/* Feedback visual */
input:valid,select:valid{border-color:var(--cor-sucesso)}
input:invalid,select:invalid{border-color:var(--cor-aviso)}

/* Reset básico */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  font-family:'Inter',sans-serif;
  background-color:var(--cor-fundo);
  color:var(--cor-texto);
  line-height:1.6;
  display:flex;
  flex-direction:column;
  min-height:100vh;
}

/* Navbar */
.navbar{background-color:var(--cor-secundaria);padding:1rem 2rem;box-shadow:var(--sombra-escura);position:sticky;top:0;z-index:1000}
.navbar-container{display:flex;justify-content:space-between;align-items:center;max-width:1200px;margin:0 auto;gap:1rem}
.logo{font-size:1.5rem;font-weight:700;color:var(--cor-texto)}
.nav-links{list-style:none;display:flex;gap:1.25rem}
.nav-links a{color:var(--cor-texto);text-decoration:none;font-weight:600;transition:color .2s ease}
.nav-links a:hover{color:var(--cor-primaria)}
.hamburger{display:none;font-size:2rem;color:var(--cor-texto);background:none;border:none;cursor:pointer}

/* Container */
.container{max-width:1000px;margin:2rem auto;padding:0 1rem;flex-grow:1}
h1,h2{text-align:center;margin-bottom:1.25rem;color:var(--cor-primaria)}
section{background-color:var(--cor-secundaria);padding:1.5rem;margin-bottom:1.5rem;border-radius:var(--raio-borda);box-shadow:var(--sombra-escura)}

/* Resumo e limite */
.resumo p,.limite-gastos p{font-size:1.05rem;margin-bottom:.5rem;color:var(--cor-texto-secundario)}
.resumo p strong,.limite-gastos p strong{color:var(--cor-texto)}
.resumo #saldo{font-weight:700;color:var(--cor-primaria)}
.resumo .negativo{color:var(--cor-aviso)}
.resumo #total-receitas{color:var(--cor-sucesso)}
.resumo #total-despesas{color:var(--cor-aviso)}

/* Formulários */
#form,#form-editar{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem}
#form-editar .modal-buttons{grid-column:span 2;display:flex;gap:1rem}
#form input,#form select,#form button,#form-editar input,#form-editar select,#form-editar button{
  width:100%;padding:12px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto)
}
#form button{
  grid-column:span 2;background-color:var(--cor-primaria);color:#fff;font-weight:700;cursor:pointer;transition:filter .2s ease,transform .1s ease
}
#form button:hover{filter:brightness(1.05)}
#form button:active{transform:translateY(1px)}
.modal-salvar-btn{background-color:var(--cor-sucesso)!important;color:#fff;font-weight:700;cursor:pointer;transition:filter .2s}
.modal-salvar-btn:hover{filter:brightness(1.05)}
.modal-cancelar-btn{background-color:#6c757d!important;color:#fff;font-weight:700;cursor:pointer;transition:filter .2s}
.modal-cancelar-btn:hover{filter:brightness(1.05)}

/* Lista de transações */
#lista-transacoes{list-style:none;display:flex;flex-direction:column;gap:0.75rem}
.transacao-item{
  display:flex;justify-content:space-between;align-items:center;padding:1rem;border-radius:12px;border:1px solid var(--cor-borda);
  border-left:6px solid;transition:transform .15s ease,box-shadow .15s ease,background-color .2s ease;cursor:pointer
}
.transacao-item:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(0,0,0,.15)}
/* fundos com a nova paleta (usa color-mix quando disponível) */
.transacao-item.receita{
  border-color:var(--cor-sucesso);
  background-color:color-mix(in srgb, var(--cor-sucesso) 12%, transparent);
}
.transacao-item.despesa{
  border-color:var(--cor-aviso);
  background-color:color-mix(in srgb, var(--cor-aviso) 12%, transparent);
}
:root.light .transacao-item.receita{
  background-color:color-mix(in srgb, var(--cor-sucesso) 10%, #ffffff);
}
:root.light .transacao-item.despesa{
  background-color:color-mix(in srgb, var(--cor-aviso) 10%, #ffffff);
}
.transacao-info{flex:1;display:flex;align-items:center;gap:1rem}
.transacao-info span{font-size:.95rem;color:var(--cor-texto-secundario)}
.transacao-item .valor{font-weight:700;font-size:1.1rem;padding:0 1rem;color:var(--cor-texto)}
.transacao-actions{display:flex;gap:.5rem}
.edit-btn,.delete-btn{background:none;border:none;font-size:1.2rem;cursor:pointer;transition:color .2s ease;padding:.5rem}
.edit-btn{color:var(--cor-primaria)} .edit-btn:hover{color:color-mix(in srgb, var(--cor-primaria) 80%, #fff)}
.delete-btn{color:var(--cor-aviso)} .delete-btn:hover{color:color-mix(in srgb, var(--cor-aviso) 80%, #fff)}

/* Gráficos */
.graficos{display:grid;grid-template-columns:1fr;gap:1.25rem}
.grafico{background-color:var(--cor-fundo);padding:1rem;border-radius:var(--raio-borda);box-shadow:var(--sombra-escura)}
.grafico-container{position:relative;height:clamp(240px, 40vh, 420px);max-width:100%;margin:0 auto 1rem auto}
.grafico-container canvas{width:100%!important;height:100%!important;display:block}

/* Limite de gastos */
.limite-gastos input{
  width:100%;padding:10px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto);margin:.5rem 0 1rem
}
.progress-bar{width:100%;height:20px;background-color:var(--cor-borda);border-radius:12px;overflow:hidden;margin-top:1rem}
.progress-bar-fill{height:100%;background-color:var(--cor-sucesso);width:0;transition:width .5s ease}

/* Modal (edição e confirmação) */
.modal{display:none;position:fixed;z-index:1002;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.45)}
.modal-content{
  background-color:var(--cor-secundaria);padding:2rem;border:1px solid var(--cor-borda);
  width:90%;max-width:520px;border-radius:16px;box-shadow:var(--sombra-escura);position:relative;text-align:center
}
.modal-content h2{margin:0 0 1rem}
.modal-content p{margin-bottom:1.25rem;font-size:1.05rem;color:var(--cor-texto-secundario)}
.modal-buttons{display:flex;justify-content:center;gap:1rem;margin-top:1.25rem}
.close-btn{color:var(--cor-texto);position:absolute;top:10px;right:20px;font-size:28px;font-weight:700;cursor:pointer}

/* Mensagens */
.mensagem-app{
  position:fixed;top:70px;left:50%;transform:translateX(-50%);
  background-color:var(--cor-primaria);color:#fff;padding:1rem 1.25rem;border-radius:12px;box-shadow:var(--sombra);
  z-index:1001;display:none;opacity:0;transition:opacity .4s ease, top .4s ease
}
.mensagem-app.show{display:block;opacity:1;top:80px}

/* Rodapé */
.footer{background-color:var(--cor-secundaria);padding:1rem 2rem;text-align:center;box-shadow:0 -4px 6px rgba(0,0,0,.1);margin-top:2rem}
.footer-container{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
.footer-links{display:flex;gap:1.25rem}
.footer-links a{color:var(--cor-texto);font-size:1.35rem;transition:color .2s ease}
.footer-links a:hover{color:var(--cor-primaria)}

/* Controles de Filtro e Ordenação */
.filter-sort-controls{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.25rem;justify-content:center;align-items:center}
.filter-controls,.sort-controls{display:flex;gap:.5rem;flex-grow:1;justify-content:center}
.filter-sort-controls select,.filter-sort-controls button{
  padding:10px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto);font-size:1rem;cursor:pointer;transition:background-color .2s ease,border-color .2s ease
}
.filter-sort-controls select:hover,.filter-sort-controls button:hover{background-color:var(--cor-secundaria);border-color:var(--cor-primaria)}
.filter-sort-controls button{background-color:var(--cor-primaria);color:#fff;font-weight:700}
.filter-sort-controls button:hover{filter:brightness(1.05)}
#toggle-ordenacao i{font-size:1.2rem}

/* Orçamento por Categoria */
.orcamento-categorias .orcamento-controles{display:flex;flex-wrap:wrap;gap:1rem;margin-bottom:1.25rem;justify-content:center;align-items:center}
.orcamento-categorias .orcamento-controles select,
.orcamento-categorias .orcamento-controles input[type="number"],
.orcamento-categorias .orcamento-controles button{
  padding:12px;border-radius:10px;border:1px solid var(--cor-borda);
  background-color:var(--cor-fundo);color:var(--cor-texto);font-size:1rem;flex-grow:1
}
.orcamento-categorias .orcamento-controles button{background-color:var(--cor-primaria);color:#fff;font-weight:700;cursor:pointer;transition:filter .2s ease}
.orcamento-categorias .orcamento-controles button:hover{filter:brightness(1.05)}
.lista-orcamentos-categorias{display:flex;flex-direction:column;gap:1rem}
.orcamento-item{
  background-color:var(--cor-fundo);padding:1rem;border-radius:12px;border:1px solid var(--cor-borda);
  border-left:6px solid var(--cor-primaria);display:flex;flex-direction:column;gap:.5rem;box-shadow:var(--sombra);position:relative
}
.orcamento-item .orcamento-info,.orcamento-item .orcamento-gasto{display:flex;justify-content:space-between;font-size:1.05rem}
.orcamento-item .orcamento-gasto span:first-child{font-weight:700}
.orcamento-item .porcentagem-gasto-categoria{font-weight:700}
.orcamento-item .status-ok{color:var(--cor-sucesso)}
.orcamento-item .status-quase{color:#F59E0B}
.orcamento-item .status-excedido{color:var(--cor-aviso)}
.orcamento-progress-bar{width:100%;height:15px;background-color:var(--cor-borda);border-radius:10px;overflow:hidden;margin-top:.5rem}
.orcamento-progress-fill{height:100%;background-color:var(--cor-sucesso);width:0;transition:width .5s ease,background-color .3s ease;border-radius:10px}
.orcamento-progress-fill.status-quase{background-color:#F59E0B}
.orcamento-progress-fill.status-excedido{background-color:var(--cor-aviso)}
.remover-orcamento-btn{background:none;border:none;color:var(--cor-aviso);font-size:1.2rem;cursor:pointer;transition:color .2s ease;position:absolute;top:1rem;right:1rem;padding:.5rem}
.remover-orcamento-btn:hover{color:#ff6b6b}

/* Tema / Botão tema */
#toggle-tema{display:inline-block;font-size:1.6rem;margin-left:1rem;background:none;border:none;cursor:pointer;transition:opacity .2s ease}
:root:not(.light) #toggle-tema i{color:#ffffff}
:root.light #toggle-tema i{color:#000000}
#toggle-tema:hover i{opacity:.7}

/* =====================
   Animações de lista
   ===================== */
.transacao-item{opacity:1;transition:opacity .3s ease,transform .3s ease}
.transacao-item.removendo{opacity:0;transform:translateY(-5px)}
.transacao-item.nova{opacity:0;transform:translateY(10px)}
.transacao-item.nova.show{opacity:1;transform:translateY(0)}

/* =====================
   Mobile / Responsivo
   ===================== */
@media (max-width: 1024px){
  .container{padding:0 1rem}
  .grafico-container{height:clamp(220px, 38vh, 360px)}
}

@media (max-width: 768px){
  .nav-links{display:none;flex-direction:column;width:100%;background-color:var(--cor-secundaria);position:absolute;top:60px;left:0;padding:1rem 0;box-shadow:var(--sombra-escura)}
  .nav-links.active{display:flex}
  .hamburger{display:block}
  #form,#form-editar{grid-template-columns:1fr}
  #form-editar .modal-buttons{flex-direction:column}
  .graficos{grid-template-columns:1fr}
  .footer-container{flex-direction:column;text-align:center}

  .filter-sort-controls{flex-direction:column;align-items:stretch}
  .filter-controls,.sort-controls{flex-direction:column;width:100%}
  .filter-sort-controls select,.filter-sort-controls button{width:100%}

  .orcamento-categorias .orcamento-controles{flex-direction:column;align-items:stretch}
  .orcamento-categorias .orcamento-controles select,
  .orcamento-categorias .orcamento-controles input[type="number"],
  .orcamento-categorias .orcamento-controles button{width:100%}

  .orcamento-item .remover-orcamento-btn{position:static;margin-top:.5rem;align-self:flex-end;width:auto}

  /* gráficos mais confortáveis no mobile */
  .grafico-container{height:clamp(200px, 34vh, 300px)}
}
.btn-acoes {
  background-color: var(--cor-primaria);
  color: #fff;
  padding: 8px 12px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  transition: background-color 0.3s;
}

.btn-acoes:hover {
  background-color: var(--cor-primaria-hover, #0056b3);
}
/* Botão flutuante de Ajuda (FAB) */
.fab-ajuda{
  position:fixed;
  right:20px;
  bottom:24px;
  width:56px;
  height:56px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:50%;
  background-color:var(--cor-primaria);
  color:#fff;
  box-shadow:var(--sombra-escura);
  z-index:1003;
  text-decoration:none;
  transition:transform .15s ease,filter .2s ease, box-shadow .2s ease;
}
.fab-ajuda i{
  font-size:1.25rem;
  line-height:1;
}
.fab-ajuda:hover{ filter:brightness(1.05); box-shadow:0 12px 22px rgba(0,0,0,.25); }
.fab-ajuda:active{ transform:translateY(1px); }

/* foco teclado/acessibilidade */
.fab-ajuda:focus-visible{
  outline:3px solid color-mix(in srgb, var(--cor-primaria) 60%, #fff);
  outline-offset:3px;
}

/* reduz animações se o usuário preferir */
@media (prefers-reduced-motion: reduce){
  .fab-ajuda{ transition:none }
}
